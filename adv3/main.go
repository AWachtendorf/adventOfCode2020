package main

import (
	"fmt"
	"strings"
)

//puzzleInput from website
const puzzleInput = "........#.............#........\n...#....#...#....#.............\n.#..#...#............#.....#..#\n..#......#..##............###..\n..........#......#..#..#.......\n.#..#.......#.........#.#......\n.........#..#....##..#.##....#.\n..#....##...#..................\n##..........#.##...#....##..#..\n...#....#...#..............#...\n...........................#..#\n..##.##.#..................#...\n...#.##..#............#........\n........#.......#...#.....##.#.\n.##..........#......#.......#..\n...#..........#...#..#.......#.\n......#...#...#.##.......#.#...\n........#...#...#...##.........\n#..............#.#....#.......#\n..#..#..#.#....#...............\n.....#........#...#..........#.\n##......#...#..#.##.......#....\n..#.#.....#.#.............#.#.#\n#..#..##......##...#...........\n..#......#........#.....#......\n.....#.......#....#.#...#......\n...#........#...........#...#..\n.......#.#...........###....#..\n...#...........##....##........\n#....#..####....#.....#..#....#\n..........#...........#........\n...#.......#....#.#.........#..\n....#...#.......#..###.........\n......#......#..#......#..#....\n...#.....#............#..#.....\n...#.#.#.#..#.......#.....#....\n#....##...#.........#...##.....\n#..#.......#..#..#..#...##.....\n#.......#............#.....#...\n.#........##....##...#........#\n.....#...#.....................\n.......#........#..............\n.....#............#.#.#...#.#..\n.....##..#.............#.......\n..#.##..#........#..#...#......\n.........#.#....#...........#..\n.#.....#..#....#.....#...#.....\n....#.#................#.......\n...............##......#...#...\n.##...#...#.......##.#....#....\n............#........#.......#.\n......##.#.#...................\n.#.#..............#.......#....\n#.....#...#.......#..#...#.....\n.............#....#..#......#..\n........#...##................#\n.......#...#..#..##............\n..#..#...##...#..#.#.....#...#.\n.#.#...#.........#.#...........\n...###....#.......#...#........\n........#......##.#...#..##..#.\n.....................#.#.......\n.............#...........#...#.\n#..#..#.....#.#...#............\n...#....#.....#...........#....\n..##.....##...#......#..##.....\n#.....#.....###.#.....#....##..\n.#...........###...............\n..................#..##.#...#..\n................#....##.#......\n.#.#.#...#....#.........#..#.#.\n#.......#........##............\n.......##.#....#.#............#\n..........#..##.#....#.........\n........##..#....#.............\n.........#....#...........##...\n#.........#.#..#..#..........#.\n.....#........#......#.........\n....#.#.#...............#......\n.#..#..##...#.##..........#....\n..#....................#.#.....\n.........#....#...........#.#.#\n........#....##.##.............\n..#.....#.......#..#......#....\n#..........#.#.....#.#....#....\n........##.#.....#..#.....#.#..\n...................#...#....#.#\n............#..#....#...#...#..\n..............#.#.........#....\n...#..#..#.#..##..##...........\n.#...........................#.\n.#.......#...........#....#.#.#\n......#..#...#........#...##...\n.........#......#.#.......#...#\n...#..##................#......\n.............#.#..##....#.#....\n...............#..#......#.....\n.#......#.#.#....#........#....\n........#..#.##..#..#.........#\n...#....#.#...#..#.......#..#..\n..#...##.........#..#...#......\n...#...........#.............#.\n....#.....................#....\n.....#..#...............#.#...#\n....#..........#........#......\n..#....#........##..##.........\n...#....#..#.#.......#...#.....\n..#........#....#...##....#.#..\n.#...#........##.....#....###..\n#....#....##......#........#...\n.........#..#.#..........#....#\n....#...#.....#.......##.......\n..............#..........#.##..\n#...#..#..............#......#.\n.................#......##....#\n..#..##..#.......#..#.#......#.\n.............#........#.....#.#\n.#.##............#..#..........\n..#...#...........#..##........\n.#....#...#....#.......#.......\n...#.#..#..#..#....#.....#..#..\n....#..##..............#...#...\n#..........###......###........\n.##.##......#..#............#..\n.#...........#.#.....#...#.....\n#.#..#...#............#........\n.........#...#...#..........##.\n.......###..#..........#.......\n...........###.....#........#..\n.#.............#.....#......#..\n...#.....#....#.#.........##...\n....##..##...#.......##........\n......#....##.........#......#.\n..........#.....##..#.....#..#.\n..........####...#..#.........#\n.##....#..#.#...#.......#......\n...#.#.##.#.#...#....#.#.#.....\n.........#...##........##.....#\n..#........#..........##...##.#\n##...##..........#.#...........\n..............#......#.........\n........#.....#.#.......#......\n.#...#.....#....#.#..#.........\n.....#....................##...\n....#..................#.#...##\n.....#............#..##........\n#..........#....#.#.......##.#.\n....#..#.....................#.\n#..#....##.....#...............\n..#...#..#..##....#.#..........\n.......#......#.#.......#.....#\n...#.#.......#...#.##..........\n....#..........#....#.#.#......\n.......#..#..........#..##.....\n#......#......#...#......#...#.\n###..#....##......##........#..\n.#..........#.....#.......#.#..\n.......#.....#.....#.#.........\n..#...#....#...................\n..............#.##.............\n.#...#.......#.##...#.#.......#\n.......#......................#\n....#.#...#.#........#.........\n.#......#....#...#.............\n#.......#...###.....#.#.#..#...\n#....##.#...............##.....\n..#.......#..................#.\n.....####...............#......\n.##......#......#.#.......##.#.\n#......##..###....#....#......#\n.##.......##.##...#.##.........\n......##............#.......#..\n......#..#.....##.#............\n.#..........#.....##...........\n#.........#......#......##.#...\n.........#.......#..#......#.#.\n.........#.......#...........#.\n.#..##.#..................##...\n.............#.............#...\n.....##........#......##...##..\n..#..#.#.....#..#....#.........\n.....#....#.....#.....#........\n#......##.....#....#....#......\n#.................#..#.#......#\n.......#..#......#....#.#...#.#\n....#.........#..#..........#.#\n##......#............#...#...#.\n....##......#...#.....#....##..\n.#...##.........#..............\n......#.....................#..\n..#..........###....#..........\n#....#...#..#.............#....\n#........#.#......#....#.......\n.#...#.......#..#...#.#...#..#.\n................##.#.....#.....\n###.......#...#................\n...#.......#...#.#.....#.......\n..#.........#.....#.#.......#..\n......#.......................#\n#.....#.#..#....#.......#......\n...#....#..#....####...........\n.............#.....#...##......\n.......#.........#...#..#......\n.##..#.........#....#.#........\n....##...#.#...........#....#..\n.........................##....\n..###.......##....#.#.........#\n.#....#.#.#...........##....#..\n......#...#..#..#..#..#.......#\n..#....#.#.......#..#..#..#...#\n.....##...#.##....#.#...#......\n.........#..#....#..#..........\n.##..##.........#.#.....#......\n..........#...##...#.#...#.....\n#.##..#..#.............#.......\n...#...........#.......#......#\n.......#....#....#...##.......#\n..#.##........###..#......#....\n...#...........###......#..#..#\n.#.........#.#.........#.#.....\n##.......##.##.##......##......\n............#...#..........#...\n....................#..........\n...#..#...........#...#...#....\n.................#...#......###\n...#................#.#.##.....\n...............#........#......\n#.............##......#.#..#...\n..#.#.....#..#.##.....##...#...\n......#.........#......#.......\n#.......#......#....#........#.\n.#..##.....#.........#.........\n....##.##.#...#.........##.#...\n...............#..#..#..##.....\n.#..#...............###........\n.##............##..............\n...............#...##...#...#.#\n..#.#......#.#..#.............#\n#.#..#..##.........#.#.#...#...\n....##.#....................##.\n.........#..#.....#.....#..#..#\n....#......#......#.##....#....\n........###..#.............#..#\n##................#.........#..\n#.....#.......#....#...........\n..#.......#..#........#....#...\n..#.#.##..#.#...##........#.##.\n..#..........#............#....\n..........#...............##...\n..........###........#.#.......\n.....###..#.............#......\n##.............#...#.....#.....\n.....#......#....#........#.#..\n............#..#..............#\n.................#...........##\n#........#.........###.....#...\n..#.#..............##......#.#.\n.#...........#.........#..##..#\n...............................\n.#.....#..#....#....#......#...\n.#...#......#.#..#....#.......#\n......#.##.......#......#......\n......#..###..#................\n#..#.....#........##...#.......\n......##.........##....#...##..\n.#..........#.................#\n#..#.......#...............#...\n.........#..###....#.#.##.#....\n..#...#.##..##...............##\n.........#.....................\n.#....##...#......#....#.......\n............#..........#..#....\n...#......##....#....#........#\n.#...................#.........\n#.#........###....#..........#.\n.........#....#....#........##.\n.#....#..#.........#..#........\n...............#..#...#..#...##\n.........#....##....#......#...\n.#.............................\n...#........#...#.#...#.#..#...\n.....#..##...#.#...............\n#.....#....#.........#.........\n#...#...........##.........#...\n..##........#.#...#...#......#.\n...........#.....#...#.#.......\n......###....#.....#...........\n......##...#..........#....#.#.\n.......##..##..........#.......\n....#............#..#....##....\n..##...................#.#.....\n...#.#..#.#....................\n.#..##..#............##.###..#.\n#.#...#....#.#..........#.#....\n........#....#.....#...........\n..##....#...#.......#..........\n...........##.##....#..........\n.....#............#............\n.......#.............#....#....\n.................#......#......\n......##.......#....#..##...#..\n.#..#....#.....................\n...#.#.#...#......##...........\n##........##.#....#....#.......\n.......#.....#..#..#...#.##....\n#..........#....#.#..#..#..#...\n...##..............#...........\n.........#.....#.#....#.......#\n.........#....##..#..##..#.....\n.....#......................#..\n...###...#..#......#...........\n....#.....................#....\n...............................\n..#.....###.......#..#....#....\n#..........#.................#.\n......#.......###.......#..##..\n.............#.##..............\n......#..#.#..#...........#....\n...#....##.#...#..#.#...#....#.\n..................#...#....#.##\n......#.#....#.................\n......#.#.....#.....#..##......\n#..##...........#..#.....#.##.."

type rowData struct {
	points []string
}

type columnData struct {
	rows []*rowData
}

func newRow() *rowData {
	r := &rowData{}
	return r
}

func (r *rowData) insertInRowData(point string) {
	r.points = append(r.points, point)
}

func (c *columnData) insertInColumnData(r *rowData) {
	c.rows = append(c.rows, r)
}

//readAllData reads the data of the puzzle input and processes it
//to put it in a slice
func readAllData() *columnData {
	c := &columnData{}

	//replace all symbols that we don't need so that we get clean fields
	cleanedString := strings.ReplaceAll(puzzleInput, "\n", " ")
	separatedString := strings.Fields(cleanedString)

	for _, j := range separatedString {
		row := newRow()
		for l := 0; l < len(j); l++ {

			row.insertInRowData(string([]rune(j)[l]))
		}
		c.insertInColumnData(row)
	}
	//for _, j := range c.rows {
	//	println(fmt.Sprintf("%v", j))
	//}
	return c
}

func (c *columnData) checkForTrees(col, row int) int{
	checkSum := 0
	rowCheck := 0
	columnCheck := 0
	length := len(c.rows[0].points)-1
	for {
		treeCheck := c.checkTree(rowCheck, columnCheck)
		if treeCheck {
		 //println("tree")
			checkSum++
			//println(checkSum)
		} else if !treeCheck {
			//println("no tree")
		}
		rowCheck += row
		columnCheck += col

		if columnCheck == length+1{
			columnCheck = 0
		}
		if columnCheck == length+2{
			columnCheck = 1
		}
		if columnCheck == length+3{
			columnCheck = 2
		}
		if columnCheck == length+4{
			columnCheck = 3
		}
		if columnCheck == length+5{
			columnCheck = 4
		}
		if columnCheck == length+6{
			columnCheck = 5
		}
		if columnCheck == length+7{
			columnCheck = 6
		}
		if rowCheck > len(c.rows)-1{
		return checkSum
		}
	}

}


func (c *columnData) checkTree(i, j int) bool {
	if c.rows[i].points[j] == "." {

		return false
	} else {
		return true
	}
}

func main() {

	c := readAllData()
	right1down1 := c.checkForTrees(1,1)
	println(right1down1)
	right3down1 := c.checkForTrees(3,1)
	println(right3down1)
	right5down1 := c.checkForTrees(5,1)
	println(right5down1)
	right7down1 := c.checkForTrees(7,1)
	println(right7down1)
	right1down2 := c.checkForTrees(1,2)
	println(right1down2)
	result := right1down2*right7down1*right5down1*right3down1*right1down1
	println(fmt.Sprintf("%v",result))
}
